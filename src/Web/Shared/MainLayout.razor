@using MudBlazor.Utilities
@using Color = System.Drawing.Color
@inherits LayoutComponentBase
<MudThemeProvider Theme="MyCustomTheme"/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>

    <MudAppBar>
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())"/>
        <MudText Typo="Typo.h5" Class="ml-3">Bravis work planner</MudText>
        <MudSpacer/>
        <MudThemeManagerButton OnClick="@((e) => OpenThemeManager(true))" />
        <MudThemeManager Open="_themeManagerOpen" OpenChanged="OpenThemeManager" Theme="_themeManager" ThemeChanged="UpdateTheme" />
        <MudSpacer/>
        <MudIconButton Icon="@Icons.Material.Filled.MoreVert" Edge="Edge.End"/>
    </MudAppBar>
    
    <MudDrawer @bind-Open="_drawerOpen" ClipMode="DrawerClipMode.Always">
        <NavMenu/>
    </MudDrawer>

    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.False" Style="padding-top: 15px;">
            @Body
        </MudContainer>
    </MudMainContent>

</MudLayout>

@code {
    private ThemeManagerTheme _themeManager = new ThemeManagerTheme();
    public bool _themeManagerOpen = false;

    protected override void OnInitialized()
    {
        MyCustomTheme.Shadows.Elevation[1] = "0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)";
        StateHasChanged();
    }
    
    bool _drawerOpen = true;

    void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }
    
    void OpenThemeManager(bool value)
    {
        _themeManagerOpen = value;
    }

    void UpdateTheme(ThemeManagerTheme value)
    {
        _themeManager = value;
        StateHasChanged();
    }
    
    private MudTheme MyCustomTheme = new MudTheme()
    {
        Palette = new Palette()
        {
            Divider = Colors.LightGreen.Default,
            Secondary = Colors.LightGreen.Default,
            AppbarBackground = new MudColor("#106610"),
        },
        Typography = new Typography()
        {
            Default = new Default()
            {
                FontFamily = new[] { "Segoe UI", "Helvetica", "Arial", "sans-serif" },
            },
        },
        LayoutProperties = new LayoutProperties
        {
            DefaultBorderRadius = "25px",
        },
        ZIndex = new ZIndex
        {
            AppBar = 4,
            Drawer = 12,
        },
    };
}